#- =============================================================================
#- Trajectory
#- =============================================================================
{#- source #}
ecmcConfigOrDie "Cfg.SetAxisTrajSourceType(${ECMC_AXIS_NO},{{ trajectory.source }})"

ecmcConfigOrDie "Cfg.SetAxisJerk(${ECMC_AXIS_NO},{{ trajectory.axis.jerk|default(trajectory.axis.acceleration) }})"
ecmcConfigOrDie "Cfg.SetAxisAcc(${ECMC_AXIS_NO},{{ trajectory.axis.acceleration }})"

{%- if trajectory.axis.deceleration is defined %}
    ecmcConfigOrDie "Cfg.SetAxisDec(${ECMC_AXIS_NO},{{ trajectory.axis.deceleration }})"
{%- else %}
    ecmcConfigOrDie "Cfg.SetAxisDec(${ECMC_AXIS_NO},{{ trajectory.axis.acceleration }})"
{%- endif %}

ecmcConfigOrDie "Cfg.SetAxisVel(${ECMC_AXIS_NO},{{ trajectory.axis.velocity }})"

{%- if trajectory.axis.emergencyDeceleration is defined %}
    ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(${ECMC_AXIS_NO},{{ trajectory.axis.emergencyDeceleration }})"
{%- else %}
    {%- if (trajectory.axis.deceleration is defined) and (trajectory.axis.deceleration > trajectory.axis.acceleration) %}
        ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(${ECMC_AXIS_NO},{{ trajectory.axis.deceleration * 10.0 }})"
    {%- else %}
        ecmcConfigOrDie "Cfg.SetAxisEmergDeceleration(${ECMC_AXIS_NO},{{ trajectory.axis.acceleration * 10.0 }})"
    {%- endif %}
{%- endif %}

{%- if (trajectory.jog is defined) and (trajectory.jog.velocity is defined) %}
    ecmcConfigOrDie "Cfg.SetAxisJogVel(${ECMC_AXIS_NO},{{ trajectory.jog.velocity }})"
{%- else %}
    ecmcConfigOrDie "Cfg.SetAxisJogVel(${ECMC_AXIS_NO},{{ trajectory.axis.velocity }})"
{%- endif %}

{%- if trajectory.modulo is defined %}
    ecmcConfigOrDie "Cfg.SetAxisModRange(${ECMC_AXIS_NO},{{ trajectory.modulo.range}})"
    ecmcConfigOrDie "Cfg.SetAxisModType(${ECMC_AXIS_NO},{{ trajectory.modulo.type}})"
{%- endif %}
