<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ecmccfg</title><link>https://paulscherrerinstitute.github.io/ecmccfg/</link><description>Recent content on ecmccfg</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 28 Sep 2024 21:15:08 +0000</lastBuildDate><atom:link href="https://paulscherrerinstitute.github.io/ecmccfg/index.xml" rel="self" type="application/rss+xml"/><item><title>build at PSI</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/build/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/build/</guid><description>These instructions only work at PSI!
Build at PSI, using driver.makefile by default this module is only build for RHEL7 and Epics &amp;gt;=R7.0.5
build on login cluster make [LIBVERSION] [clean] [uninstall] install check a particular version check the module loads for version dev, Epics R7+ and ECMC version dev, note MASTER_ID=-1 which runs ECMC in master-less mode. Make proper adjustments to match your needs in terms of versions.</description></item><item><title>addAxis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addaxis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addaxis/</guid><description>description Script for adding axis EPICS PVs.
details Adds an motion axis.
author Niko Kivel</description></item><item><title>addDataStorage.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/adddatastorage/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/adddatastorage/</guid><description>description Script for adding dataStorage.
details Adds dataStorage buffer.
author Anders Sandstroem
paramters DS_SIZE Size of data buffer.
DS_ID (optional), default 0, buffer ID
DS_TYPE (optional), default 0, 0: Normal Buffer, 1: Ring Buffer, 2: FIFO Buffer
SAMPLE_RATE_MS (optional), default 1
DS_DEBUG (optional), default 0, 0: No debug printouts, 1: Debug printouts
DESC (optional) Description of PLC
Example calls:
call for 1000 elements at 10 Hz ${SCRIPTEXEC} ${ecmccfg_DIR}addDataStorage.</description></item><item><title>addDomain.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/adddomain/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/adddomain/</guid><description>description Script for adding an EtherCAT domain.
details Adds an EtherCAt domain.
author Anders Sandström
paramters EXE_RATE (optional) Execution rate [cycles] defaults 0 (same EC_RATE)
EXE_OFFSET (optional) Execution offset cycles [cycles] defaults 0
ALLOW_OFFLINE (optional) Allow domain to be offline defaults 0
All EtherCAT entries generated after this command will be assigned</description></item><item><title>addEcDataItem.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addecdataitem/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addecdataitem/</guid><description>description Script for adding a ethercat data item.
details The ethercat data item allows for accessing alreday configured ethercat domain data in a flexible
author Anders Sandström</description></item><item><title>addEcSdoRT.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addecsdort/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addecsdort/</guid><description>description Script for adding asyn SDO object (access to SDO:s in realtime)
details Add SDO for async access during realtime operation
author Anders Sandström</description></item><item><title>addEncoder.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addencoder/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addencoder/</guid><description>description Script for adding an extra encoder to an axis.
details Adds an encoder to the last configured axis.
author Niko Kivel
paramters CONFIG configuration file, i.e. ./cfg/axis_1_enc_2.enc
DEV (optional) device name, i.e. MOTOR1
CLEAR_VARS_CMD (optional) Set to &amp;ldquo;empty&amp;rdquo; for not clear env vars (if vars needed for later use).
CFG_MACROS (optional) Substitution macros for config file
Example call:
${SCRIPTEXEC} ${ecmccfg_DIR}addEncoder.cmd, &amp;#34;CONFIG=./cfg/linear_1_enc_3.enc&amp;#34;</description></item><item><title>addMaster.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addmaster/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addmaster/</guid><description>description Script for claiming a particular master.
details Claims an EtherCAT master.
author Niko Kivel
paramters MASTER_ID (optional) master ID as shown by ethercat master.
Example calls:
call w/o MASTER_ID ${SCRIPTEXEC} ${ecmccfg_DIR}addMaster.cmd call w/ MASTER_ID, which claims the 4th master. ${SCRIPTEXEC} ${ecmccfg_DIR}addMaster.cmd, &amp;#34;MASTER_ID=3&amp;#34;</description></item><item><title>addSlave.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addslave/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addslave/</guid><description>description Script for adding a slave to the EtherCAT bus configuration.
details Adds the respective hardware to the bus configuration, adds specific and default PV to the EPICS database. For some/most slaves also a default
author Niko Kivel
paramters HW_DESC Hardware descriptor, i.e. EL1008
SLAVE_ID (optional) bus position
SUBST_FILE (optional) substitution file
P_SCRIPT (optional) naming convention prefix script
NELM (optional) Used for oversampling cards. Defaults to 1
DEFAULT_SUBS (optional) option to disble default PVs for mapped PDOs</description></item><item><title>addSlaveKL.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addslavekl/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addslavekl/</guid><description>description Script for adding a KL slave to the EtherCAT bus configuration of KL type.
details Adds the respective hardware to the bus configuration, adds specific and default PV to the EPICS database. For some/most slaves also a default
author Anders Sandstrom
paramters HW_DESC Hardware descriptor, i.e. KL2032
SLAVE_ID EtherCAT bus position of the BK1250 (or similar terminal)
SLAVE_ID_KL KL-Bus index in two digit hex starting at zero for the first slave after BK1250 (or similar terminal)</description></item><item><title>addVirtualAxis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addvirtualaxis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/addvirtualaxis/</guid><description>description Script for adding axis EPICS PVs.
details Adds an virtual axis with PVs.
author Niko Kivel</description></item><item><title>applyAxisSynchronization.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyaxissynchronization/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyaxissynchronization/</guid><description>description Script for applying axis synchronization
details Adds synchronization parameters to an axis provided by CONFIG.
author Niko Kivel
paramters CONFIG configuration file, i.e. ./cfg/linear_1.sax
CLEAR_VARS_CMD (optional) Set to &amp;ldquo;empty&amp;rdquo; for not clear env vars (if needed vars for later use).
Example call:
${SCRIPTEXEC} ${ecmccfg_DIR}applyAxisSynchronization.cmd, &amp;#34;CONFIG=./cfg/linear_1.sax&amp;#34;</description></item><item><title>applyConfig.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyconfig/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyconfig/</guid><description>description Script for applying bus configuration.
details Applies the EtherCAT configuration and caluclates data offsets in the process image.
author Niko Kivel
Example call:
${SCRIPTEXEC} ${ecmccfg_DIR}applyConfig.cfg</description></item><item><title>applySlaveConfig.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyslaveconfig/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyslaveconfig/</guid><description>description Script for applying a specific slave configuration after the slave had been added manually.
details Apply configurations to a slave.
author Niko Kivel
Example call:
call applySlaveConfig with CONFIG
${SCRIPTEXEC} ${ecmccfg_DIR}applySlaveConfig.cmd, &amp;#34;CONFIG=-Motor-Nanotec-ST4118L1804-B&amp;#34; call applySlaveConfig with LOCAL_CONFIG
${SCRIPTEXEC} ${ecmccfg_DIR}applySlaveConfig.cmd, &amp;#34;LOCAL_CONFIG=./myFancyServoConfig.cfg&amp;#34;</description></item><item><title>applySlaveDCconfig.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyslavedcconfig/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applyslavedcconfig/</guid><description>description Script for applying dc config to slave
details Apply dc configurations to a slave.
author Anders Sandstroem</description></item><item><title>applySubstitutions.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applysubstitutions/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applysubstitutions/</guid><description>description Script for applying substitution file
details Applies substitution from ${SUBST_FILE} with ${P_SCRIPT}
author Niko Kivel
paramters SUBST_FILE (optional) substitution file
ECMC_P PV prefix
P_SCRIPT (optional) naming convention prefix script
NELM (optional) Used for oversampling cards. Defaults to 1
Example calls:
call w/o SLAVE_ID ${SCRIPTEXEC} &amp;#34;${ECMC_CONFIG_ROOT}applySubstitutions.cmd&amp;#34; &amp;#34;SUBST_FILE=${SUBST_FILE=ecmc${ECMC_EC_HWTYPE}.substitutions},ECMC_P=${ECMC_P}&amp;#34;</description></item><item><title>applyTemplate.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applytemplate/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/applytemplate/</guid><description>description Script for applying a template
details Applies template from ${TEMPLATE_FILE} with ${P_SCRIPT}, PARAMS can be passed
author Niko Kivel
paramters TEMPLATE_FILE template file
ECMC_P PV prefix
PARAMS (optional) additional parameters
Example calls:
call w/o SLAVE_ID ${SCRIPTEXEC} &amp;#34;${ECMC_CONFIG_ROOT}applyTemplate.cmd&amp;#34; &amp;#34;TEMPLATE_FILE=ecmcEcSlave.template,ECMC_P=${ECMC_P}&amp;#34;</description></item><item><title>chkOverSampFactOrDie.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkoversampfactordie/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkoversampfactordie/</guid><description>description Validates requested oversampling factor
details Checks if requested oversampling factor is valid otherwise exits EPICS/ECMC
author Anders Sandstroem</description></item><item><title>chkOverSampTimeOrDie.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkoversamptimeordie/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkoversamptimeordie/</guid><description>description Validates the resulting sampling time for oversampling slaves.
details Checks if the resulting sampling time for oversampling slaves is higher or equal to the minimum time.
author Anders Sandstroem</description></item><item><title>chkValidCurrentSetOrDie.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkvalidcurrentsetordie/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkvalidcurrentsetordie/</guid><description>description Validates current settings
details Checks if requested run current and standby current is less than max current and larger than 0.
author Anders Sandstroem</description></item><item><title>chkValidVoltageSetOrDie.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkvalidvoltagesetordie/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/chkvalidvoltagesetordie/</guid><description>description Validates requested voltage
details Ensure requested nominal voltage is less than max voltage and larger than 0
author Anders Sandstroem</description></item><item><title>configureAxis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/configureaxis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/configureaxis/</guid><description>description Script for adding an axis with configuration.
details Adds an axis to the configuration and applies parameters provided by CONFIG.
author Niko Kivel
paramters CONFIG configuration file, i.e. ./cfg/linear_1.pax
DEV (optional) device name, i.e. MOTOR1
CLEAR_VARS_CMD (optional) Set to &amp;ldquo;empty&amp;rdquo; for not clear env vars (if vars needed for later use).
CFG_MACROS (optional) Substitution macros for config file
Example call:
${SCRIPTEXEC} ${ecmccfg_DIR}configureAxis.cmd, &amp;#34;CONFIG=./cfg/linear_1.pax&amp;#34;</description></item><item><title>configureSlave.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/configureslave/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/configureslave/</guid><description>description Script for adding a slave with dedicated slave configuration to the EtherCAT bus configuration.
details Adds the respective hardware to the bus configuration, adds specific and default PV to the EPICS database. Applies a specific slave configuration.
author Niko Kivel
paramters HW_DESC Hardware descriptor, i.e. EL7037
CONFIG configuration file, i.e. -Motor-Nanotec-ST4118L1804-B
The CONFIG together with the HW_DESC form the full filename which by definition is ecmc${HW_DESC}${CONFIG}.cmd, i.e.: ecmcEL7037-Motor-Nanotec-ST4118L1804-B.</description></item><item><title>configureVirtualAxis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/configurevirtualaxis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/configurevirtualaxis/</guid><description>description Script for adding a virtual axis with configuration.
details Adds a virtual axis to the configuration and applies parameters provided by CONFIG.
author Niko Kivel
paramters CONFIG configuration file, i.e. ./cfg/linear_11.vax
DEV (optional) device name, i.e. GAP
CLEAR_VARS_CMD (optional) Set to &amp;ldquo;empty&amp;rdquo; for not clear env vars (if needed vars for later use).
Example call:
${SCRIPTEXEC} ${ecmccfg_DIR}configureVirtualAxis.cmd, &amp;#34;CONFIG=./cfg/linear_11.vax&amp;#34;</description></item><item><title>ecmc_axis-records.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis-records/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis-records/</guid><description>description Script for adding axis related EPICS PVs.
details Adds motorRecord to the IOC.
author Anders Sandstroem
This script is typically called by \b addAxis.cmd</description></item><item><title>ecmc_axis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis/</guid><description>description Script for configuring a physical axis.
details Configures a physical axis in ECMC, based on previously set environment variables.
author Anders Sandstroem
This script is typically called by \b addAxis.cmd, often via \b ecmc_axis-records.cmd</description></item><item><title>ecmc_axis_diag.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_diag/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_diag/</guid><description>description Script for adding axis diagnostic EPICS PVs.
details Adds diagnostic PVs to the IOC.
author Anders Sandstroem</description></item><item><title>ecmc_axis_mr.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_mr/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_mr/</guid><description>description Script for loading motor record related databases
details Script for loading motor record related databases and creating motor record axis object
author Anders Sandstroem
This script is typically called by \b ecmc_axis.cmd, often via \b ecmc_axis-records.cmd</description></item><item><title>ecmc_axis_sync.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_sync/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_sync/</guid><description>description Script for configuring axis synchronization
details Configures ECMC for axis synchronization, based on previously set environment variables.
author Anders Sandstroem
This script is typically called by \b applyAxisSynchronization.cmd</description></item><item><title>ecmc_enc-records.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_enc-records/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_enc-records/</guid><description>description Script for adding encoder related EPICS PVs.
details Script for adding an encoder to a previously created axis.
author Anders Sandstroem
This script is typically called by \b addAxis.cmd</description></item><item><title>ecmc_enc.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_enc/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_enc/</guid><description>description Script for adding an extra encoder
details Configures a encoder object in ECMC, based on previously set environment variables.
author Anders Sandstroem
This script is typically called by \b addEncoder.cmd</description></item><item><title>ecmc_virt_axis-records.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_virt_axis-records/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_virt_axis-records/</guid><description>description Script for adding axis related EPICS PVs.
details Adds motorRecord to the IOC.
author Anders Sandstroem
This script is typically called by \b addVirtualAxis.cmd</description></item><item><title>ecmc_virt_axis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_virt_axis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_virt_axis/</guid><description>description Script for configuring a virtual axis.
details Configures a virtual axis in ECMC, based on previously set environment variables.
author Anders Sandstroem
This script is typically called by \b addVirtualAxis.cmd, often via \b ecmc_virt_axis-records.cmd</description></item><item><title>ecmcClassicNaming.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/naming/ecmcclassicnaming/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/naming/ecmcclassicnaming/</guid><description>description Script for defining ${ECMC_PREFIX}
details Gathers relevant information about MasterID, SlaveID, &amp;hellip; to create naming convention compliant PREFIX
author Niko Kivel</description></item><item><title>ecmcESSnaming.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/naming/ecmcessnaming/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/naming/ecmcessnaming/</guid><description>description Script for defining ${ECMC_P}
details Gathers relevant information about MasterID, SlaveID, &amp;hellip; to create naming convention compliant PREFIX
author Niko Kivel</description></item><item><title>ecmcmXsXXX.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/naming/ecmcmxsxxx/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/naming/ecmcmxsxxx/</guid><description>description Script for defining ${ECMC_P}
details Gathers relevant information about MasterID, SlaveID, &amp;hellip; to create naming convention compliant PREFIX
author Niko Kivel</description></item><item><title>finalize.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/finalize/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/finalize/</guid><description>description Script for finalizing. Executed just before iocInit (atInit)
details Script for finalizing. Executed just before iocInit (atInit).
author Anders Sandström</description></item><item><title>general.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/general/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/general/</guid><description>description Add general PVs
details Script for adding general and master diagnostics EPICS PVs
author Niko Kivel, Anders Sandstroem</description></item><item><title>generalDiagnostics.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/generaldiagnostics/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/generaldiagnostics/</guid><description>description Script for general diagnostics
details Script for setting default diagnostics
author Niko Kivel, Anders Sandstroem</description></item><item><title>init.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/init/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/init/</guid><description>description Initialization script
details Script for setting up the basic EPICS environment.
author Niko Kivel, Anders Sandstroem</description></item><item><title>initAll.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/initall/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/initall/</guid><description>description Init main script
details Script for setting up the basic EPICS environment.
author Niko Kivel, Anders Sandstroem</description></item><item><title>initAxis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/initaxis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/initaxis/</guid><description>description init axis environment
details Script for setting up the basic AXIS environment.
author Niko Kivel, Anders Sandstroem</description></item><item><title>issueWarning.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/issuewarning/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/issuewarning/</guid><description>description Issue a warning
details Generic verification script for expressions
author Anders Sandstroem</description></item><item><title>loadAxisPLCFile.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadaxisplcfile/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadaxisplcfile/</guid><description>description Script for adding a PLC from file.
details Adds a PLC defined in FILE. Also adds PLC specific EPICS PVs, i.e. for enable/disable.
author Niko Kivel
paramters FILE PLC definition file, i.e. ./plc/homeSlit.plc
AX_ID (optional) Ax number, default 0
PLC_MACROS (optional) Substitution macros for PLC code
TMP_PATH (optional) directory to dump the temporary plc file after macro substitution
PRINT_PLC_FILE (optional) 1/0, printout msi parsed plc file (default enable(1)).</description></item><item><title>loadPLCFile.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadplcfile/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadplcfile/</guid><description>description Script for adding a PLC from file.
details Adds a PLC defined in FILE. Also adds PLC specific EPICS PVs, i.e. for enable/disable.
author Niko Kivel, Anders Sandström
paramters FILE PLC definition file, i.e. ./plc/homeSlit.plc
PLC_ID (optional) PLC number, default 0, or to next free PLC, the actual PLC Id is stored in ECMC_PLC_ID and can be used after this command
SAMPLE_RATE_MS (optional) excecution rate, default 1000/EC_RATE
PLC_MACROS (optional) Substitution macros for PLC code.</description></item><item><title>loadPLCLib.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadplclib/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadplclib/</guid><description>description Script for loading a PLC from lib from file.
details Adds a PLC defined in FILE. Also adds PLC specific EPICS PVs, i.e. for enable/disable.
author Anders Sandström
paramters FILE PLC definition file, i.e. ./plc/homeSlit.plc
PLC_ID (optional) PLC number, default last loaded PLC
PLC_MACROS (optional) Substitution macros for PLC code. The macros &amp;ldquo;SELF_ID&amp;rdquo;,&amp;ldquo;SELF&amp;rdquo;,M_ID, and M are reserved:
INC (optional) List of directories for include files to pass to MSI (if several paths thendivide with &amp;lsquo;:').</description></item><item><title>loadPlugin.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadplugin/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadplugin/</guid><description>description Script for loading a ecmc plugin from file.
details Loads a ecmc-plugin from file.
author Anders Sandström
paramters FILE Filename of plugin shared lib (./ecmcPlugin_Advanced.so)
PLUGIN_ID Id of plugin to load
CONFIG (optional) Configuration string sent to plugin at construct
REPORT (optional) Printout information of loaded plugin if set to &amp;ldquo;1&amp;rdquo;
Example call:
${SCRIPTEXEC} ${ecmccfg_DIR}loadPlugin.cmd, &amp;#34;PLUGIN_ID=0,FILE=./ecmcPlugin_Advanced.so,CONFIG=&amp;#39;PLUGIN CONFIGS GO HERE &amp;#39;</description></item><item><title>loadSubstAxes.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadsubstaxes/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadsubstaxes/</guid><description>description Script for adding multiple axes based on subst and template file
details Configure multiple axes by using subst file
author Anders Sandström
${SCRIPTEXEC} ${ecmccfg_DIR}loadSubstAxes.cmd, &amp;#34;FILE=./ax.subs&amp;#34;</description></item><item><title>loadSubstConfig.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadsubstconfig/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadsubstconfig/</guid><description>description Script for loading complete ecmc cfg based on subst files and templates
details Loads complete ecmc cfg based on subst files and templates
author Anders Sandström
${SCRIPTEXEC} ${ecmccfg_DIR}loadSubstConfig.cmd, &amp;#34;FILE=./cfg.subs&amp;#34;</description></item><item><title>loadSubstHw.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadsubsthw/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/loadsubsthw/</guid><description>description Script for adding multiple hw based on subst and template file
details Loads hw cfg based on subst files and templates
author Anders Sandström
${SCRIPTEXEC} ${ecmccfg_DIR}loadSubstHw.cmd, &amp;#34;FILE=./hw.subs&amp;#34;</description></item><item><title>loadYamlAxis.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/jinja2/loadyamlaxis/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/jinja2/loadyamlaxis/</guid><description>description Script for loading Axis from yaml file via jinja2
details adds an Axis, based on a yaml config file
author Niko Kivel, Anders Sandström
paramters FILE the yaml-file containing the PLC definition
DEV the device name (optional, defaults to ${IOC}
Example calls:
call ${SCRIPTEXEC} &amp;#34;./loadYamlAxis.cmd&amp;#34; &amp;#34;FILE=./axis1.yaml&amp;#34; ${SCRIPTEXEC} &amp;#34;./loadYamlAxis.cmd&amp;#34; &amp;#34;FILE=./axis1.yaml, DEV=foobar&amp;#34;</description></item><item><title>loadYamlEnc.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/jinja2/loadyamlenc/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/jinja2/loadyamlenc/</guid><description>description Script for adding Encoder from yaml file via jinja2
details adds an encoder to an axis, based on a yaml config file
author Anders Sandström
paramters FILE the yaml-file containing the PLC definition
DEV the device name (optional, defaults to ${IOC}
Example calls:
call ${SCRIPTEXEC} &amp;#34;./loadYamlEnc.cmd&amp;#34; &amp;#34;FILE=./enc.yaml&amp;#34; ${SCRIPTEXEC} &amp;#34;./loadYamlEnc.cmd&amp;#34; &amp;#34;FILE=./enc.yaml, DEV=foobar&amp;#34;</description></item><item><title>loadYamlPlc.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/jinja2/loadyamlplc/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/jinja2/loadyamlplc/</guid><description>description Script for loading PLC from yaml file via jinja2
details adds a PLC, line by line, from a yaml-file, parsed by jinja2
author Niko Kivel, Anders Sandström
paramters FILE the yaml-file containing the PLC definition
Example calls:
call ${SCRIPTEXEC} &amp;#34;./loadYamlPlc.cmd&amp;#34; &amp;#34;FILE=./plc1.yaml&amp;#34;</description></item><item><title>restoreRecordUpdateRate.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/restorerecordupdaterate/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/restorerecordupdaterate/</guid><description>description Restores record update rate to what was defined in startup.cmd
details Restores record update rate to what was defined in startup.cmd
author Anders Sandström</description></item><item><title>setAppMode.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/setappmode/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/setappmode/</guid><description>description Script for switching to operational mode.
details Validates configuration, starts realtime thread and checks EtherCAT slaves are in OP.
author Niko Kivel</description></item><item><title>setDiagnostics.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/setdiagnostics/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/setdiagnostics/</guid><description>description Script for enabling default diagnostics.
details Set some default values to diagostics
author Niko Kivel</description></item><item><title>setRecordUpdateRate.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/setrecordupdaterate/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/setrecordupdaterate/</guid><description>description Script for changing record update rate
details Update record processing rate, all records created after this command will be updated in the specified rate.
author Anders Sandström</description></item><item><title>slaveVerify.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/slaveverify/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/slaveverify/</guid><description>description ** script for slave verification and optional reset**
details will verify the slave identity and reset by writing to 0x1011, optionally read firmwre version from 0x100a
author Niko Kivel
Macros</description></item><item><title>verifyOrDie.cmd</title><link>https://paulscherrerinstitute.github.io/ecmccfg/source/general/verifyordie/</link><pubDate>Sat, 28 Sep 2024 21:15:08 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/general/verifyordie/</guid><description>description Generic verification script
details Generic verification script for expressions
author Anders Sandstroem</description></item><item><title>introduction</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/introduction/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/introduction/</guid><description>Principle EtherCAT requires the field bus components (slaves) to be configured on the master. The master must know about the data exchanges with the slaves, this is referred to as process image.
During IOC-startup, the requested configuration is validated against the actually present hardware on the bus. Mismatches will result in an error, the IOC will not start.
Blindly restarting the IOC, with only partially working EtherCAT hardware, will results in an inoperable IOC!</description></item><item><title>ethercat command line interface</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/ethercatcli/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/ethercatcli/</guid><description>ethercat CLI The IgH EtherCAT master provides a command line interface (CLI) which is a very powerful tool. The most common commands will be explained here.
ethercat master This will show the state of all masters on the respective host.
The command will show the state of all masters. To limit the command to a single master, make use of the -m parameter.
The -m parameter is available to all ethercat commands, and is even require by some in case of multiple masters.</description></item><item><title>motion</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/motion/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/motion/</guid><description>Topics both_limits error position lag error, (following error), tuning latency issues drive refuse to enable force manual motion both_limits error The &amp;ldquo;BOTH_LIMITS&amp;rdquo; error can be related to that limits switches are not powered with 24V. As standard at PSI, limits are feed from 24V outputs, normally an EL2819 terminal. Basically the outputs needs then to be set to 1 in order to power the switches. Check the schematics in order to find out which output that powers the switches for a certain axis and then use one the following approaches to set it to 1:</description></item><item><title>modes</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/startup/modes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/startup/modes/</guid><description>ecmc modes ecmc can be started in different modes by setting the MODE parameter to startup.cmd (or require ecmccfg):
FULL DAQ NO_MR A separate mode for commissioning is also available, called ENG_MODE.
mode==FULL (default) In FULL mode all ecmc functionalities are supported, like motion, daq and plcs.
Example of starting ecmc in FULL mode:
$(ECMCCFG_INIT)$(SCRIPTEXEC) ${ecmccfg_DIR}startup.cmd, &amp;quot;IOC=$(IOC),ECMC_VER=develop,MODE=FULL&amp;quot; # or since FULL mode is default the MODE parameter can be ignored $(ECMCCFG_INIT)$(SCRIPTEXEC) ${ecmccfg_DIR}startup.</description></item><item><title>stepper and biss-c</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/best_practice/stepper_biss_c/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/best_practice/stepper_biss_c/</guid><description>setup EL7041 stepper drive slave EL5042 BISS-C encoder slave Lab test stage (1mm/rev) Lab 4 axis motion control box RLS BISS-C linear encoder (absolute) Open loop encoder (incremental) scalings Config for scaling in mm, mm/s, mm/s2
encoder scaling Two encoders are configured:
Closed loop: BISS-C. This is used as the default encoder for control Open loop: EL7041 Step counter Both these encoders (and drive) should be scaled to the same unit (mm).</description></item><item><title>syntax</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/plc_cfg/syntax/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/plc_cfg/syntax/</guid><description>In ECMC, PLCs are based on the exprtk expression evaluation library. For detailed syntax help please visit the exprtk website
common errors, misconceptions and info operators :=: assignment = or ==: equal comparison functions PLC do not immediately write to the bus! The PLC will execute synchronous to the cycle, or at an integer fraction of it. The processed data will be send to the bus with the next cycle.</description></item><item><title>yaml configuration</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisyaml/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisyaml/</guid><description>Since ecmccfg v7, the axis configuration is based on yaml files. Backwards compatibility for classic EPICS environment variable based configuration is assured for legacy systems.
yaml is - like python - indentation sensitive!
Indent with 2 spaces.
introduction python 3.x is required
The config is processed by a python script with a jinja2 backend. The processor will complain if mandatory keys are missing. Likewise, missing optional keys are populated with default values.</description></item><item><title>data storage buffer</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/data_storage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/data_storage/</guid><description>data storage examples This dir contains two examples: here.
Continuously add value to data storage. Push to epics by hw trigger. Continuously add value to data storage. Push to epics by epics pv trigger. Data buffered data can be accessed by the &amp;ldquo;IOC_TEST:ds0-Data-Act&amp;rdquo; waveform pv (NELM 10000) Custom scale and offset can be applied to the stored values by MACROS (to the plc) in the startup file.
1 push to epics by hw trigger In this example the data stored in dataStorage 0 is pushed to epics at a falling edge of the axis 1 high limit.</description></item><item><title>tuning</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/tuning/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/tuning/</guid><description>Tuning There are normally several control loops in an ecmc motion system:
Position loop (centralized in ecmc if CSV) Velocity loop (in drive) Current loop (in drive) Position loop The position loop control parameters can be accessed and tuned by PVs. Normally, a pure P controller is enough (ki and kp set to 0) but sometimes the I and D part can be needed.
Backlash
Tuning systems with backlash can be difficult.</description></item><item><title>ecmc server</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/host/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/host/</guid><description>Topics latency issues EtherCAT rate (EC_RATE) latency issues High latency, more than 10% of the ethercat cycle time, can in worse case result, in lost ethercat frames, which of course is not an ideal situation. High latency of the ecmc_rt thread can be related to:
The generic device driver is used High load on system &amp;hellip; generic device driver is used Check which driver is in use by running (on the ecmc server):</description></item><item><title>function libs</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/plc_cfg/function_libs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/plc_cfg/function_libs/</guid><description>function libs Function libraries can be loaded into ecmc PLCs by loadPLCLib.cmd. The command takes these parameters:
FILE PLC: definition file, i.e. ./plc/homeSlit.plc PLC_ID: (optional) PLC number, default last loaded PLC PLC_MACROS: (optional) Substitution macros for PLC code. The macros &amp;ldquo;SELF_ID&amp;rdquo;,&amp;ldquo;SELF&amp;rdquo;,M_ID, and M are reserved: &amp;ldquo;SELF_ID&amp;rdquo; = PLC Id of this plc &amp;ldquo;SELF&amp;rdquo; = &amp;ldquo;plc${SELF_ID}&amp;rdquo; &amp;ldquo;M_ID&amp;rdquo; = EtherCAT master ID &amp;ldquo;M&amp;rdquo; = &amp;ldquo;ec${M_ID}&amp;rdquo; INC: (optional) List of directories for include files to pass to MSI (if several paths then divide with &amp;lsquo;:').</description></item><item><title>iocsh utilities</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/iocsh_utils/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/iocsh_utils/</guid><description>ECMC Iocsh Utilities Iocsh function &amp;ldquo;ecmcEpicsEnvSetCalc()&amp;rdquo; &amp;ldquo;ecmcEpicsEnvSetCalc()&amp;rdquo; is used to evaluate expressions and set result to EPCIS environment variables. Usefull for calculate:
slave offsets sdo/pdo adresses (also in hex) scalings in motion record fields &amp;hellip; ecmcEpicsEnvSetCalc -h Use &amp;#34;ecmcEpicsEnvSetCalc(&amp;lt;envVarName&amp;gt;, &amp;lt;expression&amp;gt;, &amp;lt;format&amp;gt;)&amp;#34; to evaluate the expression and assign the variable. &amp;lt;envVarName&amp;gt; : EPICS environment variable name. &amp;lt;expression&amp;gt; : Calculation expression (see exprTK for available functionality). Examples: Simple expression:&amp;#34;5.5+${TEST_SCALE}*sin(${TEST_ANGLE}/10)&amp;#34;. Use of &amp;#34;RESULT&amp;#34; variable: &amp;#34;if(${TEST_VAL}&amp;gt;5){RESULT:=100;}else{RESULT:=200;};&amp;#34;.</description></item><item><title>EL5042</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/el5042/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/el5042/</guid><description>Topics error/warning Diagnostics Offset LSB Bit [Bit] (0x80p8:17) SSI error/warning Could be caused by:
Wrong settings (bit counts, ..), see further below on this page (and also motion/best practice). Bad electrical connection Wrong power supply Defect encoder or EL5042 Long cabling lengths Always start troubleshooting by checking the error, warning and ready bits and reading the EL5042 manual. Next step is to read the diagnostic SDO bits of the EL5042, see below under heading &amp;ldquo;Diagnostics&amp;rdquo;.</description></item><item><title>EL70x1</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/el70x1/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/el70x1/</guid><description>Topics error/warning Tuning error/warning If the drive is in error or warning state, further information about the reason for the warning/error can be read from the drive terminal by using the ethercat command. See command line interface for more info.
In order to use the ethercat command, you must first login to the server where the ecmc IOC is running.
The diagnostic data can be read from register Index A010 STM Diag data Ch.</description></item><item><title>best practice</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/plc_cfg/best_practice/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/plc_cfg/best_practice/</guid><description>best practice Here you can find some best practice configurations for common use cases.
Macros MSI include, substitute Printouts Description The complete examples with startup files can be found here
macros Use of macros makes the code more generic. When loading a PLC file with &amp;ldquo;loadPLCFile.cmd&amp;rdquo;, custom macros can be defined in &amp;ldquo;PLC_MACROS&amp;rdquo;:
${SCRIPTEXEC} ${ecmccfg_DIR}loadPLCFile.cmd, &amp;#34;FILE=./cfg/main.plc, INC=.:./cfg/, DESC=&amp;#39;Test&amp;#39;, SAMPLE_RATE_MS=1000, PLC_MACROS=&amp;#39;BO_S_ID=${ECMC_EC_SLAVE_NUM}&amp;#39;&amp;#34; NOTE: ECMC_EC_SLAVE_NUM expands to the ID of the last added slave.</description></item><item><title>ecmc command reference</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/ecmc_command_ref/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/ecmc_command_ref/</guid><description>ecmc command reference ethercat motion general misc plc</description></item><item><title>EL9xxx</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/el9xxx/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/hardware/el9xxx/</guid><description>Topics over current protection passive terminals over current protection In the standard setup at PSI over current protection modules are used to feed 24V to both the EtherCAT communication bus (E-bus) and the power bus of the EtherCAT slaves. If the over current protection is not enabled then the EtherCAT slaves will not receive power.
First time, (and only first time), a system is in use, the over-current modules needs to be enabled in order to allow current to flow.</description></item><item><title>panel</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/panel/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/knowledgebase/panel/</guid><description>Overview panel For an overview of an ecmc system, the ecmcMain.ui panel is a good starting point. The ecmcMain.ui covers most parts of an ecmc system:
ecmc_rt thread diagnostics: Jitter Cycle time EtherCAT: Status Lost frames Slave count master Id Links to dedicated sub panels for each slave type. Links to all configured objects: motion expert panels PLC objects plugin objects data storage objects The ecmcMain.</description></item><item><title>scaling</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/scaling/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/scaling/</guid><description>By popular demand, the topic scaling will be discusses in closer detail.
ecmc has to scaling factors for each joint, firstly the drive scaling, secondly the encoder scaling.
Changes to the scaling have direct effects on the Kp of the PID-loop. If the drive scaling is changes, make sure to adjust the PID parameters accordingly.
drive scaling Drive scaling deals with the relation of the drive output (typically a 16- or 32-bit register) to axis velocity.</description></item><item><title>servo motor (Ex72xx)</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/best_practice/servo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/best_practice/servo/</guid><description>setup EP7211-0034 servo drive slave Lab test stage (1mm/rev) Motor : AM8111-0F20 scaling Config for scaling in mm, mm/s, mm/s2
motor AM8111-XFX0 Data about the motor can be found here: https://infosys.beckhoff.com/english.php?content=../content/1033/am8100/index.html&amp;amp;id=
Important for scaling factors in axis.yaml is the motor pole count. For the AM8111-XFX0 motor the pole count is 6.
encoder scaling Only the encoder integrated encoder is configured in this example. The specification of the encoder for a AM8111-0F20 motor:</description></item><item><title>direction of motion</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/direction/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/direction/</guid><description>The direction of motion can be affected by multiple means. Namely, on the slave level, in the axis scaling or in the motorRecord.
The best option is to change the direction of motion on the slave level. The alternatives lead to unintuitive scaling factors or mismatch between ECMC and EPICS.
EtherCAT slave ecmccfg allows SDOs to set individual SDOs in the startup-script of the IOC or in dedicated config files for slaves.</description></item><item><title>best practice</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/best_practice/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/general_cfg/best_practice/</guid><description>EtherCAT rate (EC_RATE) The default EtherCAT frame rate in ecmc is set to 1kHz. For most applications this is however not needed and can therefore be reduced. A reduced EtherCAT rate reduces the load on the controller. In general, a good value for the frame rate is in the range 100Hz to 1kHz. For motion systems, a frame rate of 100Hz..500Hz is normally enough. Rates outside the 100Hz..1kHz range is normally not a good idea, and some slaves might not support it.</description></item><item><title>homing</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/homing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/homing/</guid><description>homing The following sequences are available:
ECMC_SEQ_HOME_NOT_VALID = 0, ECMC_SEQ_HOME_LOW_LIM = 1, ECMC_SEQ_HOME_HIGH_LIM = 2, ECMC_SEQ_HOME_LOW_LIM_HOME = 3, ECMC_SEQ_HOME_HIGH_LIM_HOME = 4, ECMC_SEQ_HOME_LOW_LIM_HOME_HOME = 5, ECMC_SEQ_HOME_HIGH_LIM_HOME_HOME = 6, ECMC_SEQ_HOME_BWD_HOME = 7, ECMC_SEQ_HOME_FWD_HOME = 8, ECMC_SEQ_HOME_BWD_HOME_HOME = 9, ECMC_SEQ_HOME_FWD_HOME_HOME = 10, ECMC_SEQ_HOME_LOW_LIM_INDEX = 11, ECMC_SEQ_HOME_HIGH_LIM_INDEX = 12, ECMC_SEQ_HOME_SET_POS = 15, ECMC_SEQ_HOME_LOW_LIM_SINGLE_TURN_ABS = 21, ECMC_SEQ_HOME_HIGH_LIM_SINGLE_TURN_ABS = 22, ECMC_SEQ_HOME_SET_POS_2 = 25, ECMC_SEQ_HOME_TRIGG_EXTERN = 26, ECMC_SEQ_HOME_NOT_VALID = 0 Not a valid homing sequence, can be used if encoder is absolute.</description></item><item><title>PLC</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisplc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisplc/</guid><description>Introduction Each axis can have a native PLC. This PLC can be e.g. used for interlocking or synchronization. The axis PLC is part of the yaml config. The code can be provided inline or in a separate file.
inline plc: enable: yes externalCommands: yes code: - ax3.enc.actpos:=(ax1.enc.actpos+ax2.enc.actpos)/2 filter: velocity: enable: yes size: 100 trajectory: enable: yes size: 100 file plc: enable: yes externalCommands: yes file: cfg/heave.plc filter: velocity: enable: yes size: 100 trajectory: enable: yes size: 100 This is the respective plc file</description></item><item><title/><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_sync_unset/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_sync_unset/</guid><description/></item><item><title/><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_unset/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_axis_unset/</guid><description/></item><item><title/><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_enc_unset/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_enc_unset/</guid><description/></item><item><title/><link>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_virt_axis_unset/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/motion/ecmc_virt_axis_unset/</guid><description/></item><item><title/><link>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/empty/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/scripts/empty/</guid><description/></item><item><title/><link>https://paulscherrerinstitute.github.io/ecmccfg/source/startup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/source/startup/</guid><description/></item></channel></rss>