<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>motion on ecmccfg</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/</link><description>Recent content in motion on ecmccfg</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/index.xml" rel="self" type="application/rss+xml"/><item><title>yaml configuration</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisyaml/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisyaml/</guid><description>Since ecmccfg v7, the axis configuration is based on yaml files. Backwards compatibility for classic EPICS environment variable based configuration is assured for legacy systems.
yaml is - like python - indentation sensitive!
Indent with 2 spaces.
introduction python 3.x is required
The config is processed by a python script with a jinja2 backend. The processor will complain if mandatory keys are missing. Likewise, missing optional keys are populated with default values.</description></item><item><title>scaling</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/scaling/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/scaling/</guid><description>By popular demand, the topic scaling will be discusses in closer detail.
ecmc has to scaling factors for each joint, firstly the drive scaling, secondly the encoder scaling.
Changes to the scaling have direct effects on the Kp of the PID-loop. If the drive scaling is changes, make sure to adjust the PID parameters accordingly.
drive scaling Drive scaling deals with the relation of the drive output (typically a 16- or 32-bit register) to axis velocity.</description></item><item><title>direction of motion</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/direction/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/direction/</guid><description>The direction of motion can be affected by multiple means. Namely, on the slave level, in the axis scaling or in the motorRecord.
The best option is to change the direction of motion on the slave level. The alternatives lead to unintuitive scaling factors or mismatch between ECMC and EPICS.
EtherCAT slave ecmccfg allows SDOs to set individual SDOs in the startup-script of the IOC or in dedicated config files for slaves.</description></item><item><title>homing</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/homing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/homing/</guid><description>homing The following sequences are available:
ECMC_SEQ_HOME_NOT_VALID = 0, ECMC_SEQ_HOME_LOW_LIM = 1, ECMC_SEQ_HOME_HIGH_LIM = 2, ECMC_SEQ_HOME_LOW_LIM_HOME = 3, ECMC_SEQ_HOME_HIGH_LIM_HOME = 4, ECMC_SEQ_HOME_LOW_LIM_HOME_HOME = 5, ECMC_SEQ_HOME_HIGH_LIM_HOME_HOME = 6, ECMC_SEQ_HOME_BWD_HOME = 7, ECMC_SEQ_HOME_FWD_HOME = 8, ECMC_SEQ_HOME_BWD_HOME_HOME = 9, ECMC_SEQ_HOME_FWD_HOME_HOME = 10, ECMC_SEQ_HOME_LOW_LIM_INDEX = 11, ECMC_SEQ_HOME_HIGH_LIM_INDEX = 12, ECMC_SEQ_HOME_SET_POS = 15, ECMC_SEQ_HOME_LOW_LIM_SINGLE_TURN_ABS = 21, ECMC_SEQ_HOME_HIGH_LIM_SINGLE_TURN_ABS = 22, ECMC_SEQ_HOME_SET_POS_2 = 25, ECMC_SEQ_HOME_TRIGG_EXTERN = 26, Additionally, for homing of absolute encoder with ONE overflow in the range, please check here</description></item><item><title>PLC</title><link>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisplc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://paulscherrerinstitute.github.io/ecmccfg/manual/motion_cfg/axisplc/</guid><description>Introduction Each axis can have a native PLC. This PLC can be e.g. used for interlocking or synchronization. The axis PLC is part of the yaml config. The code can be provided inline or in a separate file.
inline plc: enable: yes externalCommands: yes code: - ax3.enc.actpos:=(ax1.enc.actpos+ax2.enc.actpos)/2 filter: velocity: enable: yes size: 100 trajectory: enable: yes size: 100 file plc: enable: yes externalCommands: yes file: cfg/heave.plc filter: velocity: enable: yes size: 100 trajectory: enable: yes size: 100 This is the respective plc file</description></item></channel></rss>